---
description: 豐富多元的 Flow options
---

# .flowconfig \[options\]

.flowconfig 中的 \[options\] 項目就是對 Flow 的各種設定  
使用 key-value 一對一對的定義，像是這樣：

```text
[options]
keyA=valueA
keyB=valueB
```

若是沒有被定義的項目則會使用預設值，  
有些 options 選項可以在 flow 的 command line 中指定哦！像是 `--lazy-mode` `--temp-dir` 等等的。

## 可用 options 列表 <a id="option-list"></a>

* [all](.flowconfig-options.md#all)
* [babel\_loose\_array\_spread](.flowconfig-options.md#babel_loose_array_spread)
* [emoji](.flowconfig-options.md#emoji)
* [esproposal.class\_instance\_fields](.flowconfig-options.md#esproposal-class_instance_fields-enable)
* [esproposal.class\_static\_fields](.flowconfig-options.md#esproposal-class_static_fields)
* [esproposal.decorators](.flowconfig-options.md#esproposal-decorators)
* [esproposal.export\_star\_as](.flowconfig-options.md#esproposalexport-star_as)
* [esproposal.optional\_chaining](.flowconfig-options.md#esproposal-optional_chaining)
* [esproposal.nullish\_coalescing](.flowconfig-options.md#esproposal-nullish_coalescing)
* [exact\_by\_default](.flowconfig-options.md#exact_by_default)
* [experimental.const\_params](.flowconfig-options.md#experimental-const_params)
* [include\_warnings](.flowconfig-options.md#include_warnings)
* [lazy\_mode](.flowconfig-options.md#lazy_mode)
* [log.file](.flowconfig-options.md#logfile)
* [max\_header\_tokens](.flowconfig-options.md#max_header_tokens)
* module.file\_ext
* module.ignore\_non\_literal\_requires
* module.name\_mapper
* module.name\_mapper.extension
* module.system
* module.system.node.main\_field
* module.system.node.resolve\_dirname
* module.use\_strict
* munge\_underscores
* no\_flowlib
* react.runtime
* server.max\_workers
* sharedmemory.dirs
* sharedmemory.minimum\_available
* sharedmemory.hash\_table\_pow
* sharedmemory.heap\_size
* sharedmemory.log\_level
* strip\_root
* suppress\_comment
* suppress\_type
* temp\_dir
* traces
* types\_first
* well\_formed\_exports

### all \( boolean \) <a id="all"></a>

設定為 `true` 的話會檢查專案下所有檔案，而不僅僅是標注了 `// @flow` 的檔案  
預設值是 `false`。

### babel\_loose\_array\_spread \( boolean \) <a id="babel_loose_array_spread"></a>

設定為 `true` 將會只允許型別為 **Array** 的進行 JavaScript spread 動作 \( 也就是型別為 **Map** 或 **Set** 的都不行\)。  
這個的使用場景通常是 Babel 有開起來 [loose mode](https://babeljs.io/docs/en/babel-plugin-transform-spread#loose) 的時候會比較有用。

預設是 `false`

```javascript
// @flow
const set = new Set();
const value = [...set]; // 若 babel_loose_array_spread=true 會錯。
```

### emoji \( boolean \) <a id="emoji"></a>

設定為 `true` 的話 Flow 在忙碌的時候會出現一些 emoji 表情符號

預設是 `false`

```text
Please wait. Server is initializing (👻 parsed file ...
```

### esproposal.class\_instance\_fields \( enable \| ignore \| warn \) <a id="esproposal-class_instance_fields-enable"></a>

設定為 `warn` 的話  Flow 會檢查是否在 class 中宣告實例成員  
也可以設定為 `ignore` 叫 Flow 忽略不要檢查。

```javascript
// @flow
class Welcome {
  test = 123; // 若 esproposal.class_instance_fields=warn 會報錯。
}
```

預設是 `enable`，也就是允許使用的意思！

> 實測發現 esproposal 相關的設定在 Flow `v1.135.0` 版本之後就不再支援囉！  
> 已經向社群提出 [Issue](https://github.com/facebook/flow/issues/8623) 囉！

### esproposal.class\_static\_fields \( enable \| ignore \| warn \) <a id="esproposal-class_static_fields"></a>

設定為 `warn` 的話 Flow 會檢查是否在 class 中使用 static 成員  
也可以設定為 `ignore` 叫 Flow 忽略不要檢查。

```javascript
// @flow
class Welcome {
  static foo = {}; // 若 esproposal.class_static_fields=warn 會報錯。
}
```

預設是 `enabel`，也就是允許使用的意思！

> 實測發現 esproposal 相關的設定在 Flow `v1.135.0` 版本之後就不再支援囉！  
> 已經向社群提出 [Issue](https://github.com/facebook/flow/issues/8623) 囉！

### esproposal.decorators \( ignore \| warn \) <a id="esproposal-decorators"></a>

設定為 `ignore` 的話 Flow 會忽略檢查 JavaScript 的 decorator \( decorator 可以參考[這篇](https://dev.to/dpksh/learn-javascript-class-decorators-in-5-minutes-4em7) \)

```javascript
// @flow
class Welcome {
  @Decorator // 若 esproposal.decorators=ignore 的話不會報錯，設定為 warn 或不設定都會報錯
  sayHi(): void {
    console.log('Hello');
  }
}
```

預設是 `warn`，當我們在使用 decorator 的時候 Flow 會報錯。

> 實測發現 esproposal 相關的設定在 Flow `v1.135.0` 版本之後就不再支援囉！  
> 已經向社群提出 [Issue](https://github.com/facebook/flow/issues/8623) 囉！

### esproposal.export\_star\_as \( enable \| warn \| ignore \) <a id="esproposalexport-star_as"></a>

設定為 `enable` 的話 Flow 會支援 `export * as` 這樣的語法 \( 參考 [export ns from](%20https://github.com/tc39/proposal-export-ns-from) \)

也可以設定為 `ignore` 叫 Flow 忽略不要檢查這個語法，  
或是設定為 `warn`，讓 Flow 顯示警告訊息。

```javascript
// @flow


// esproposal.export_star_as=warn 的話 Flow 會顯示警告訊息
export * as Mod form './export-something';
```

> 實測發現 esproposal 相關的設定在 Flow `v1.135.0` 版本之後就不再支援囉！  
> 已經向社群提出 [Issue](https://github.com/facebook/flow/issues/8623) 囉！

### esproposal.optional\_chaining \( enable \| warn \| ignore \) <a id="esproposal-optional_chaining"></a>

設定為 `enable` 的話 Flow 會支援 optional chaining 這樣的語法 \( 參考 [Optional Chaining](https://github.com/tc39/proposal-optional-chaining) \)

也可以設定為 `ignore` 叫 Flow 忽略不要檢查  
設定為 `warn` 可以叫 Flow 顯示出警告訊息。

```javascript
// @flow
type Shape = {
    foo?: {
        bar: number,
    },
}

const obj: Shape = {
    foo: {
        bar: 123,
    },
}

// esproposal.optional_chaining=enable 的話會解析成功，warn 的話會顯示警告訊息，ignore 會忽略不檢查
const num: vode | number = obj.foo?.bar;
```

> 需要提出個 ISSUE，看起來預設值並不是 warn，而是 ignore 或 enable 才對

### esproposal.nullish\_coalescing \( boolean \) <a id="esproposal-nullish_coalescing"></a>

設定為 `enable` 的話，Flow 會之支援 nullish coalescing 這樣的語法 \( 參考 [Nullish Coalescing](https://github.com/tc39/proposal-nullish-coalescing) \)

也可以設定為 `ignore` 叫 Flow 忽略不要檢查  
設定為 `warn` 可以叫 Flow 顯示出警告訊息。 \( 目前實測有 bug ?? \)

```javascript
// @flow
const response = {
  settings: {
    animationDuration: 0,
  }
};

// 如果 esproposal.nullish_coalescing 設定為 warn 應該要出現提醒訊息，只是實測沒有
const animationDuration = response.settings.animationDuration ?? 300;
```

> 實測發現 esproposal 相關的設定在 Flow `v1.135.0` 版本之後就不再支援囉！  
> 已經向社群提出 [Issue](https://github.com/facebook/flow/issues/8623) 囉！

{% hint style="danger" %}
可能也需要提出個 ISSUE，看起來就算設定為 warn 也不會正確的跳出提示
{% endhint %}

### exact\_by\_default \( boolean \) <a id="exact_by_default"></a>

顧名思義，若是設定為 `true` 的話，會預設要求精確匹配型別，\( 參考 [Exact object types](https://flow.org/en/docs/types/objects/#toc-exact-object-types) \)

```javascript
// @flow

type Person {
    name: string,
    age: number,
}

// exact_by_default=true 的話會報錯， false 的話會通過
const person001: Person = {
    name: 'Wayne',
    age: 26,
    foo: 'test',
}
```

預設為 `false`

### experimental.const\_params \( boolean \) <a id="experimental-const_params"></a>

設定為 `true` 的話，Flow 會限制我們不可以改變 function 接收到的參數，也就是把每個接收到的參數都當成 `const`。

```javascript
// @flow

function sum(a: number, b: number) {
    a = 123; // 若是 experimental.const_params=true 會報錯，為 false 的話會通過
    return a + b;
}
```

預設為 `false` \( 看起來這個在未來專案內都可以考慮設定為 `true` ^^ \)

### include\_warnings \( boolean \) <a id="include_warnings"></a>

設定為 `true` 的話 Flow 的 command line 訊息將會包含 warning 訊息，  
預設是不顯示的 \( 如果要看 warning 訊息的話，透過 IDE 的整合介面顯示是比較舒服的哦！ \)

{% tabs %}
{% tab title=".flowconfig" %}
```bash
[lints]
sketch-null=warn

[options]
include_warnings=true
```
{% endtab %}

{% tab title="include\_warnings.js" %}
```javascript
// @flow
function foo(bar: ?bool) {
    if (bar) {
        // ...
    } else {
        // ...
    }
}
```
{% endtab %}
{% endtabs %}

執行 `flow` 或 `flow status` 指令進行除錯就可以看到 warning 訊息囉！！

預設為 `false`。

### lazy\_mode \( fs \| ide \| watchman \| none \) <a id="lazy_mode"></a>

todo...

### log.file <a id="logfile"></a>

指定 log 檔案存放位置

預設在 `/tmp/flow/<escaped root path>.log`  
像是我有一個 Flow 專案叫 _flow-test_，他就存了一個 log 檔叫做  
`zSUserszSwaynezSwszStmpzSflow-test.log` 看不太懂齁～ 把 `zS` 換成 `/` 去掉就會變成 `/User/wayne/ws/tmp/flow-test.log` 了

### max\_header\_tokens \( integer \) <a id="max_header_tokens"></a>

我們知道 Flow 他是透過 `// @flow` 或 `// @noflow` 註解來決定是否為 Flow 檔案，進一步進行型別檢查。  
但是 Flow 不可能無限的檢查下去，因此 Flow 有一個斷點機制  
透過 `max_header_tokens` ，告訴 Flow 要往下檢查幾個註解

```javascript
// ... 1
// ... 2
// ... 3
// ... 4
// ... 5
// ... 6
// ... 7
// ... 8
// ... 9
// ... 10
// @flow

const num: string = 123; // Flow 不會檢查這個檔案，因為註解已經超過 10 段了， Flow 程序已經判定他不是 Flow 檔案了

```

預設為 `10`

